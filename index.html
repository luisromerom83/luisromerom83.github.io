<!DOCTYPE html>
<html>
<body>
<h1>HTML DOM Events</h1>
<h2>The onclick Event</h2>

<p>The onclick event triggers a  function when an element is clicked on.</p>
<p>Click to trigger a function that will output "Hello World":</p>
Movie: <input type="text" id="movie">
<div id="demo"></div>
<div id="Index"><h1>TEST04012023</h1></div>
<div id="botones"></div>
<div id="respuesta"></div>
<button onclick="myFunction()">Click me</button>
<button id="button_one" style="width: 100px; height:40px; margin-right: 10px;" onclick="alertId(this.id)">1</button>


<script>
function myFunction() {
  //document.getElementById("demo").innerHTML = "Hello World";
 try{
  const Http = new XMLHttpRequest();
const url='https://yts.mx/api/v2/list_movies.jsonp?quality=1080&query_term='+document.getElementById("movie").value;
Http.open("GET", url);
Http.send();
document.getElementById("botones").innerHTML=""
Http.onreadystatechange = (e) => {

  //document.getElementById("respuesta").innerHTML = Http.responseText;
  const resp=JSON.parse(Http.responseText)
  resp.data.movies.forEach((element,index) => {

resp.data.movies[index].torrents.forEach((element,indexT)=>
{
  
  //document.getElementById("botones").innerHTML += '<button type="submit" formaction="'+resp.data.movies[index].torrents[indexT].url+'">' + resp.data.movies[index].title + ' '+resp.data.movies[index].torrents[indexT].quality+'</button><br>';
  document.getElementById("botones").innerHTML += '<button id="'+resp.data.movies[index].torrents[indexT].url+'" onclick="alertId(this.id)" >' + resp.data.movies[index].title + ' '+resp.data.movies[index].torrents[indexT].quality+'</button><br>';
  //document.getElementById("botones").innerHTML += '<a href="'+resp.data.movies[index].torrents[indexT].url+'">' + resp.data.movies[index].title + ' '+resp.data.movies[index].torrents[indexT].quality+'</a><br>';
  //document.getElementById("botones").innerHTML='<form>  <button type="submit" formaction="https://www.w3docs.com">ABRIR</button></form>'
  //<button type="submit" formaction="https://www.w3docs.com">Click me</button>

}
)

  }
);
    
  

}
//document.getElementById("botones").innerHTML +="</form>"
}
catch (error) {
    console.log(error.message);
  }


}

function alertId(id){
  document.getElementById("demo").innerHTML = id;


}
</script>

</body>
</html>
